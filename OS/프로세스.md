# 프로세스

## 프로세스란

프로세스란 프로그램이 메모리에 올라가 CPU를 할당받아 실행되는 것을 말합니다.    
메모리는 CPU가 직접 접근할 수 있는 컴퓨터 내부의 기억장치입니다.   
프로그램이 실행되려면 메모리에 올라와 있는 상태여야 합니다.    
프로세스에 할당되는 메모리 공간은 Code, Data, Heap, Stack 4개 영역이며    
각 프로세스마다 독립적으로 할당받습니다.      

Code : 실행한 프로그램의 코드가 저장되는 영역       
Data : 프로그램의 전역 변수와 static 변수가 저장되는 영역       
Heap : 프로그래머스가 직접 동적으로 할당되는 영역     
Stack : 메소드 호출 시 생성되는 지역변수, 매개변수가 저장되는 영역     

## 프로세스 상태(state)

<img width="700" alt="image" src="https://github.com/320Hwany/TIL/assets/84896838/843abce3-6052-4cc3-96d8-c0f6b104e9fe">

New : 프로세스가 이제 막 생성된 상태를 말합니다. PCB를 부여받은 상태입니다.   
Ready : 프로세스가 CPU 할당을 받기 위해 대기하는 상태입니다. (할당 순서는 CPU 스케줄링으로 정합니다)    
Running : 프로세스가 CPU를 할당받아 실행중인 상태입니다.    
Waiting : Running 상태의 프로세스가 I/O 요청을 하거나 바로 확보될 수 없는 자원을 요청한다면    
CPU를 반납하고 요청한 일이 완료될 때까지 Waiting 상태가 됩니다. 요청한 일이 완료되면 Ready 상태가 됩니다.    

## 멀티 프로세스

멀티 프로세스란 2개 이상의 프로세스가 동시에 실행되는 것을 말합니다.    
동시에 실행된다는 것은 병렬성(Paralleism)이 있고 동시성(Concurrency)이 있습니다.    
병렬성은 멀티 코어로 정말 여러 프로세스가 말 그대로 동시에 실행되는 것이고    
동시성은 짧은 시간동안 여러 프로세스가 번갈아 연산하면서 동시에 실행되는 것처럼 보이는 것입니다.    
이렇게 멀티 프로세스를 사용함으로써 카카오톡, 크롬, 게임과 같은 여러 프로그램을 동시에 실행할 수 있습니다.    

## PCB(Process Control Block)

멀티 프로세스를 이용하면 각 프로세스마다 정보를 기억해야 합니다.      
PCB는 프로세스의 중요한 정보가 저장되는 자료구조입니다.     
예를들어 멀티 프로세스에서 각 프로세스가 어디까지 실행했었는지를 기억하는 PC,    
프로세스의 상태를 나타내는 Process State 등과 같은 정보가 저장되어 있습니다.    
운영체제의 커널이 메모리에 할당되어 있는데 이 커널 부분에 각 프로세스의 PCB가 저장되어 있습니다.    

## Context Switching

Context Switching은 한 프로세스에서 다른 프로세스로 CPU 제어권을 넘겨준 것을 말합니다.   
A라는 프로세스가 CPU 제어권을 가지고 실행 중일때 Context Switching이 일어나면 커널에 저장되어있는  
A의 상태를 A의 PCB에 저장합니다. 이제 프로세스 B는 B의 PCB를 보고 현재 어디서부터 다시 시작해야하는지를   
확인한 후 B가 CPU 제어권을 가지고 실행합니다.   
Context Switching은 프로세스 사이에서만 일어나는 것은 아니고 쓰레드 사이에서도 일어납니다.   

## IPC(Inter Process Communication)

각 프로세스는 독립적인 메모리 공간을 할당받기 때문에 다른 프로세스 주소 참조를 할 수 없지만   
프로세스 간의 데이터 공유를 가능하게 하기 위해 운영체제에서는 IPC를 제공합니다.   
IPC 방식으로는 공유 메모리, 메세지 전달이 있습니다.   

- 공유 메모리 (Shared Memory)      
공유 메모리 방식은 프로세스들이 메모리의 일부 공간을 공유합니다. (각 프로세스의 공간이 있고 공유하는 영역이 따로 있습니다)   
프로세스가 커널에 공유 메모리 할당을 요청하면 메모리 공간을 할당해줍니다.   
이후에는 커널의 도움 없이 해당 공유 메모리에 접근할 수 있습니다.    
커널의 관여가 없기 때문에 IPC 속도가 빠릅니다. 하지만 프로세스들이 직접 동기화 문제에 대해 처리를 해야합니다.    

- 메세지 전달 (Message Passing) 
메세지 전달 방식은 일반적으로 System Call로 구현됩니다.    
커널을 통해 send, receive 연산을 제공받습니다.       
예를들어 A 프로세스가 B 프로세스에게 데이터를 전송해야 한다면 A 프로세스는 커널로 메세지를 보내고    
B 프로세스는 커널로부터 메세지를 전달받습니다. IPC 속도는 느리자만 충돌이 일어나지 않기 때문에 안정성이 높습니다.   




