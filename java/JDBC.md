## JDBC (Java Database Connectivity)

애플리케이션을 개발할 때 웹 브라우저에서 애플리케이션 서버로 요청을 합니다.    
애플리케이션 서버는 해당 요청을 처리하기 위해 데이터가 저장되어있는 데이터베이스에 접근을 해야합니다.     
애플리케이션 서버가 데이터베이스에 접속을 하고 사용을 합니다.  
이때 3가지 단계로 나눠볼 수 있습니다.   
1. 커넥션 연결 (서버 -> DB)
2. SQL 전달 (서버 -> DB)
3. 결과 응답 (DB -> 서버)  

하지만 데이터베이스마다 1, 2, 3번 방법이 모두 다릅니다. 
이런 문제를 해결하기 위해서 JDBC라는 자바 표준 인터페이스가 등장했습니다.   

위에서 말한 3가지 기능을 JDBC에서는 표준 인터페이스로 정의해서 사용합니다.  
1. java.sql.Connection - 연결
2. java.sql.Statement - SQL을 담은 내용
3. java.sql.ResultSet - SQL 요청 응답

이제부터 개발자는 JDBC 표준 인터페이스만 사용해서 개발을 하면되고  
DB를 제공하는 회사에서는 이 인터페이스를 자신의 DB에 맞게 구현해서 제공합니다.  
이렇게 제공하는 라이브러리를 JDBC Driver라고 합니다.   


## JDBC와 최신 데이터 접근 기술

JDBC를 직접 사용해서 전달해도 되지만 SQL Mapper나 ORM 기술을 사용하면 JDBC의 반복적인 코드를 없애줍니다.   
또한 JPA 같은 ORM 기술을 사용하면 반복적인 SQL을 작성하지 않고 JDBC의 한계인 DB 마다 SQL, 데이터타입 등이 다른점 또한  
중간에서 해결해줘 개발 생산성을 크게 증가 시킬 수 있습니다.   

## 커넥션 연결 과정

DB 드라이버를 통해 이제 DB에 상관없이 같은 코드로 DB에 접속할 수 있게 되었습니다.   
위에서 말한 3단계중 1단계 커넥션을 연결하는 부분을 좀 더 자세히 알아보겠습니다.   
커넥션을 연결하기 위해서는 커넥션을 조회, TCP/IP 연결, ID/PW 기타 부가 정보 전달, 인증 후 DB 세션 생성, 클라이언트에 반환..   
커넥션을 연결할 때는 이러한 복잡한 과정을 거쳐야합니다.   
매 요청마다 이렇게 커넥션을 생성하여 반환하는 것은 비효율적인 방식입니다.    
따라서 커넥션을 미리 생성해두고 사용하는 방법이 등장했습니다. 이것을 커넥션 풀이라고 합니다.  

## 커넥션 풀

커넥션 풀에는 보통 기본값으로 10개의 커넥션을 미리 확보하여 풀에 넣어 놓습니다.   
이제는 커넥션을 매번 생성하지 않고 커넥션 풀을 통해 이미 생성되어 있는 커넥션을 객체 참조로 가져다 사용하면 됩니다.  
이렇게 매번 생성하지 않아도 되기 때문에 성능도 좋아지고 서버당 최대 커넥션 수를 제한할 수도 있기 때문에  
DB에 무한정 연결이 생성되는 것을 막아주어 DB를 보호하는 효과도 있습니다.   

가장 대표적인 커넥션 풀로는 HikariCP가 있습니다.   
스프링부트를 이용하여 프로젝트를 생성하였다면 HikariCP를 기본으로 사용합니다.  
 
## DataSource  

DB 드라이버를 이용해서 커넥션을 획득할 수도 있고 커넥션 풀을 이용해서 커넥션을 획득할 수도 있습니다.   
다른 방식으로 바꾸려면 애플리케이션 코드를 변경해야 합니다. 이러한 점 때문에 커넥션 획득 방법을 추상화한 DataSource가 등장했습니다.   

> 지금까지 추상화 방식이 2개 나왔는데 둘의 차이를 정리해보겠습니다.  
> JDBC는 DB에 접근하는 방식(커넥션 획득, SQL 전달, 결과)을 추상화한 것입니다.   
> DataSource는 3단계 중 첫단계인 커넥션을 획득하는 방식을 추상화한 것입니다.  


출처 : 스프링 데이터 접근 기술 1 (인프런 - 김영한)


